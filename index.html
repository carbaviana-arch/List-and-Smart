<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lista de Compras Vintage</title>
<style>
    body {
        font-family: 'Georgia', serif;
        background-color: #f5f0e6;
        margin: 0;
        padding: 0;
        display: flex;
        flex-direction: column;
        height: 100vh;
        color: #4b3832;
    }

    header {
        background-color: #c19a6b;
        color: #fff;
        padding: 15px;
        text-align: center;
        font-size: 1.5em;
        font-weight: bold;
        box-shadow: 0 2px 5px rgba(0,0,0,0.3);
    }

    .content {
        flex: 1;
        overflow-y: auto;
        padding: 10px;
    }

    .item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 8px;
        border-bottom: 1px solid #d9c6b0;
        background-color: #fff8f0;
        border-radius: 5px;
        margin-bottom: 5px;
        transition: opacity 0.3s;
    }

    .item.comprado {
        opacity: 0.5;
        background-color: #e0d6cb;
    }

    .item-caro {
        background-color: #f8e1c4;
        border: 1px solid #d4a373;
    }

    .nombre {
        flex: 2;
        cursor: pointer;
    }

    .cantidad-control {
        display: flex;
        align-items: center;
        gap: 5px;
    }

    button {
        border: none;
        background-color: #c19a6b;
        color: #fff;
        padding: 5px 8px;
        font-size: 1em;
        border-radius: 4px;
        cursor: pointer;
    }

    button:hover {
        background-color: #a67c52;
    }

    .precio {
        margin-left: 5px;
        font-weight: bold;
    }

    .subtotal {
        margin-left: 10px;
        font-weight: bold;
        color: #5a3e36;
    }

    .delete-btn {
        background-color: transparent;
        color: red;
        font-size: 1.2em;
        cursor: pointer;
    }

    .dock {
        display: flex;
        justify-content: space-around;
        background-color: #c19a6b;
        padding: 8px 0;
        border-top: 2px solid #a67c52;
    }

    .dock button {
        background: none;
        border: none;
        color: white;
        font-size: 1.4em;
        padding: 4px;
    }

    .dock button:active {
        transform: scale(0.9);
    }

    .hidden {
        display: none;
    }

    .resumen {
        padding: 10px;
        background-color: #fff8f0;
        border-radius: 5px;
        border: 1px solid #d9c6b0;
    }

</style>
</head>
<body>

<header>üõí Lista de Compras Vintage</header>

<div class="content" id="listaTab">
    <div id="lista"></div>
</div>

<div class="content hidden" id="resumenTab">
    <div class="resumen" id="resumen"></div>
</div>

<div class="content hidden" id="presupuestoTab">
    <div class="resumen">
        <label for="presupuesto">Presupuesto (‚Ç¨): </label>
        <input type="number" id="presupuesto" min="0" step="0.01">
        <p id="estadoPresupuesto"></p>
    </div>
</div>

<div class="dock">
    <button onclick="mostrarTab('listaTab')">üìã</button>
    <button onclick="mostrarTab('resumenTab')">üìä</button>
    <button onclick="mostrarTab('presupuestoTab')">üí∞</button>
</div>

<script>
let listaCompras = [
    {nombre: 'Patatas', precio: 3.00, cantidad: 2, categoria: 'Verduras', comprado: false},
    {nombre: 'Manzana', precio: 0.50, cantidad: 4, categoria: 'Frutas', comprado: false},
    {nombre: 'Aceite', precio: 6.00, cantidad: 1, categoria: 'Despensa', comprado: false}
];
let presupuesto = 0;

function renderLista() {
    const listaDiv = document.getElementById("lista");
    listaDiv.innerHTML = "";

    const activos = listaCompras.filter(i => !i.comprado);
    const comprados = listaCompras.filter(i => i.comprado);

    [...activos, ...comprados].forEach((item, index) => {
        const subtotal = (item.precio * item.cantidad).toFixed(2);
        const itemDiv = document.createElement("div");
        itemDiv.className = "item";
        if (item.comprado) itemDiv.classList.add("comprado");
        if (subtotal >= 5) itemDiv.classList.add("item-caro");

        itemDiv.innerHTML = `
            <div class="nombre" onclick="toggleComprado(${index})">${item.nombre} ${item.precio.toFixed(2)}‚Ç¨</div>
            <div class="cantidad-control">
                <button onclick="cambiarCantidad(${index}, -1)">-</button>
                <span>${item.cantidad}</span>
                <button onclick="cambiarCantidad(${index}, 1)">+</button>
                <span class="subtotal">${subtotal}‚Ç¨</span>
                <button class="delete-btn" onclick="eliminarItem(${index})">üóëÔ∏è</button>
            </div>
        `;
        listaDiv.appendChild(itemDiv);
    });
}

function cambiarCantidad(index, cambio) {
    listaCompras[index].cantidad += cambio;
    if (listaCompras[index].cantidad < 1) listaCompras[index].cantidad = 1;
    renderLista();
    renderResumen();
    actualizarEstadoPresupuesto();
}

function toggleComprado(index) {
    listaCompras[index].comprado = !listaCompras[index].comprado;
    renderLista();
}

function eliminarItem(index) {
    listaCompras.splice(index, 1);
    renderLista();
    renderResumen();
    actualizarEstadoPresupuesto();
}

function renderResumen() {
    const resumenDiv = document.getElementById("resumen");
    resumenDiv.innerHTML = "";
    const resumen = {};

    listaCompras.forEach(item => {
        if (!resumen[item.categoria]) resumen[item.categoria] = 0;
        resumen[item.categoria] += item.precio * item.cantidad;
    });

    for (let cat in resumen) {
        resumenDiv.innerHTML += `<p><strong>${cat}:</strong> ${resumen[cat].toFixed(2)}‚Ç¨</p>`;
    }
}

function mostrarTab(tabId) {
    document.querySelectorAll(".content").forEach(tab => tab.classList.add("hidden"));
    document.getElementById(tabId).classList.remove("hidden");
}

function actualizarEstadoPresupuesto() {
    if (presupuesto > 0) {
        const total = listaCompras.reduce((sum, item) => sum + (item.precio * item.cantidad), 0);
        const estado = document.getElementById("estadoPresupuesto");
        if (total > presupuesto) {
            estado.textContent = `‚ö†Ô∏è Te has pasado del presupuesto por ${(total - presupuesto).toFixed(2)}‚Ç¨`;
            estado.style.color = "red";
        } else {
            estado.textContent = `‚úÖ Dentro del presupuesto. Te quedan ${(presupuesto - total).toFixed(2)}‚Ç¨`;
            estado.style.color = "green";
        }
    }
}

document.getElementById("presupuesto").addEventListener("input", (e) => {
    presupuesto = parseFloat(e.target.value) || 0;
    actualizarEstadoPresupuesto();
});

renderLista();
renderResumen();
</script>

</body>
</html>