<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lista de Compras</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0 0 70px 0; /* espacio para el dock */
    background-color: #f8f9fa;
  }
  h1 {
    text-align: center;
    margin: 10px 0;
  }
  .contenedor {
    padding: 10px;
  }
  ul {
    list-style: none;
    padding: 0;
    margin: 0;
  }
  li {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: white;
    margin-bottom: 5px;
    padding: 10px;
    border-radius: 8px;
    transition: opacity 0.3s;
  }
  li.comprado {
    opacity: 0.5;
  }
  .info {
    display: flex;
    flex-direction: column;
  }
  .nombre-precio {
    font-size: 16px;
    font-weight: bold;
  }
  .categoria {
    font-size: 12px;
    color: #666;
  }
  button {
    border: none;
    border-radius: 6px;
    cursor: pointer;
    padding: 5px 8px;
    font-size: 14px;
  }
  .dock {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    background: #ffffff;
    box-shadow: 0 -2px 8px rgba(0,0,0,0.1);
    display: flex;
    justify-content: space-around;
    padding: 5px 0;
  }
  .dock button {
    width: 40px;
    height: 40px;
    padding: 0;
    font-size: 18px;
    border-radius: 50%;
    background: #f1f1f1;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .activo {
    background: #007bff;
    color: white;
  }
  .oculto {
    display: none;
  }
  .caro {
    background-color: #ffe0b2 !important;
    font-weight: bold;
  }
</style>
</head>
<body>

<h1>Lista de Compras</h1>

<div id="pantalla-lista" class="contenedor">
  <input type="text" id="nuevo-articulo" placeholder="Art√≠culo">
  <input type="number" id="precio-articulo" placeholder="Precio" step="0.01">
  <input type="number" id="cantidad-articulo" placeholder="Cantidad" value="1" min="1">
  <select id="categoria-articulo">
    <option value="">Sin categor√≠a</option>
    <option value="Frutas">Frutas</option>
    <option value="Verduras">Verduras</option>
    <option value="Carnes">Carnes</option>
    <option value="L√°cteos">L√°cteos</option>
    <option value="Bebidas">Bebidas</option>
    <option value="Otros">Otros</option>
  </select>
  <button onclick="agregarArticulo()">A√±adir</button>
  <ul id="lista"></ul>
</div>

<div id="pantalla-resumen" class="contenedor oculto">
  <h2>Gasto por Categor√≠a</h2>
  <ul id="resumen-categorias"></ul>
  <h3 id="total-general"></h3>
</div>

<div class="dock">
  <button id="btn-lista" class="activo" onclick="mostrarPantalla('lista')">üìù</button>
  <button id="btn-resumen" onclick="mostrarPantalla('resumen')">üìä</button>
</div>

<script>
  let articulos = [];

  function agregarArticulo() {
    const texto = document.getElementById('nuevo-articulo').value.trim();
    const precio = parseFloat(document.getElementById('precio-articulo').value);
    const cantidad = parseInt(document.getElementById('cantidad-articulo').value);
    const categoria = document.getElementById('categoria-articulo').value;

    if (!texto || isNaN(precio) || isNaN(cantidad)) return;

    articulos.push({ texto, precio, cantidad, categoria, comprado: false });
    document.getElementById('nuevo-articulo').value = '';
    document.getElementById('precio-articulo').value = '';
    document.getElementById('cantidad-articulo').value = 1;
    document.getElementById('categoria-articulo').value = '';
    renderLista();
  }

  function toggleComprado(index) {
    articulos[index].comprado = !articulos[index].comprado;
    renderLista();
  }

  function borrarArticulo(index) {
    articulos.splice(index, 1);
    renderLista();
  }

  function renderLista() {
    const lista = document.getElementById('lista');
    lista.innerHTML = '';

    // Ordenar: no comprados primero, luego comprados
    const ordenados = [...articulos].sort((a, b) => a.comprado - b.comprado);

    ordenados.forEach((item, i) => {
      const li = document.createElement('li');
      if (item.comprado) li.classList.add('comprado');

      const subtotal = item.cantidad * item.precio;
      if (subtotal >= 5) li.classList.add('caro');

      const info = document.createElement('div');
      info.className = 'info';

      const nombrePrecio = document.createElement('div');
      nombrePrecio.className = 'nombre-precio';
      nombrePrecio.textContent = `${item.texto} ${item.precio.toFixed(2)}‚Ç¨`;

      const categoria = document.createElement('div');
      categoria.className = 'categoria';
      categoria.textContent = item.categoria ? `Categor√≠a: ${item.categoria}` : '';

      info.appendChild(nombrePrecio);
      info.appendChild(categoria);

      li.appendChild(info);

      const btnComprar = document.createElement('button');
      btnComprar.textContent = item.comprado ? '‚Ü©Ô∏è' : '‚úÖ';
      btnComprar.onclick = () => toggleComprado(articulos.indexOf(item));

      const btnBorrar = document.createElement('button');
      btnBorrar.textContent = 'üóëÔ∏è';
      btnBorrar.onclick = () => borrarArticulo(articulos.indexOf(item));

      li.appendChild(btnComprar);
      li.appendChild(btnBorrar);

      lista.appendChild(li);
    });
  }

  function mostrarPantalla(pantalla) {
    document.getElementById('pantalla-lista').classList.add('oculto');
    document.getElementById('pantalla-resumen').classList.add('oculto');
    document.getElementById('btn-lista').classList.remove('activo');
    document.getElementById('btn-resumen').classList.remove('activo');

    if (pantalla === 'lista') {
      document.getElementById('pantalla-lista').classList.remove('oculto');
      document.getElementById('btn-lista').classList.add('activo');
    } else {
      renderResumen();
      document.getElementById('pantalla-resumen').classList.remove('oculto');
      document.getElementById('btn-resumen').classList.add('activo');
    }
  }

  function renderResumen() {
    const resumenCategorias = document.getElementById('resumen-categorias');
    resumenCategorias.innerHTML = '';

    const gastoPorCategoria = {};
    let total = 0;

    articulos.forEach(item => {
      const subtotal = item.cantidad * item.precio;
      total += subtotal;
      const cat = item.categoria || 'Sin categor√≠a';
      gastoPorCategoria[cat] = (gastoPorCategoria[cat] || 0) + subtotal;
    });

    for (const cat in gastoPorCategoria) {
      const li = document.createElement('li');
      li.textContent = `${cat}: ${gastoPorCategoria[cat].toFixed(2)}‚Ç¨`;
      resumenCategorias.appendChild(li);
    }

    document.getElementById('total-general').textContent = `Total: ${total.toFixed(2)}‚Ç¨`;
  }
</script>

</body>
</html>